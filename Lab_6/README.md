# Лабораторна робота №6: Реляційна алгебра

## Інформація про роботу

**Виконавець:** Шевченко А.А.  
**Група:** КС-21  
**Спеціальність:** 122 «Комп'ютерні науки»  
**Варіант:* 15

---

## Мета роботи

Набути досвіду створення запитів у реляційній моделі баз даних, ознайомитися з основними операціями реляційної алгебри та навчитися застосовувати їх для оптимізації запитів і роботи з даними.

---

## Постановка задачі

### Варіант 15 - Запити до базової предметної області

1. Отримати повну інформацію про всі проекти в Дніпрі
2. Отримати всі поєднання "ім'я проекту-місто проекту"
3. Отримати всі імена товарів, ім'я яких складає 5 символів
4. Отримати міста постачальників статус яких дорівнює 20
5. Отримати імена постачальників з Харкова
6. Отримати імена товарів та їх вагу, які постачаються постачальниками S2 та Шевченко
7. Отримати імена товару, що постачаються постачальником зі статусом більше 15 та іменем, яке починається на літеру С
8. Отримати номери проектів, в які постачаються товари з Харкова або постачальником з Харкова
9. Отримати імена товарів, які поставляються Шевченко в кількості більше 200

---

## Опис предметної області

**Тема:** Система управління фермою

На фермі є кілька ділянок землі, яким присвоєні унікальні номери. Кожна ділянка характеризується площею, наявністю або відсутністю зрошення, посіяною в поточному сезоні культурою. Відома середня врожайність кожної з оброблюваних культур, а також перелік внесених на кожну ділянку в цьому сезоні добрив.

Для кожної культури відомо: назва, врожайність по ділянках, чи потрібне для неї зрошення, які потрібні добрива. Кожну ділянку обслуговує одна бригада, але будь-яка бригада може обслуговувати більше однієї ділянки.

Бригада має унікальний номер і характеризується: П.І.Б. бригадира, П.І.Б. працівників, кількістю одиниць кожного виду сільгосптехніки. Про кожного працівника відомо, якими видами сільгоспмашин (одним, кількома, жодним) він може керувати.

### Основні запити:
- Визначити площу під культури
- Вивести робітників бригади з технікою
- Знайти культуру з максимальною врожайністю
- Знайти бригади з технікою понад середню
- Скласти список ділянок з невідповідними добривами

### Транзакції:
- Купити техніку
- Найняти/звільнити працівників

---

## ER-діаграма (5 нормальна форма)

### Основні сутності:

#### 1. **Brigade** (Бригада)
- `brigade_id` (PK)
- `foreman_first_name`
- `foreman_last_name`
- `foreman_patronymic`
- `formation_date`

#### 2. **Worker** (Працівник)
- `worker_id` (PK)
- `brigade_id` (FK)
- `first_name`
- `last_name`
- `patronymic`
- `hire_date`
- `phone_number`

#### 3. **Equipment** (Техніка)
- `equipment_id` (PK)
- `equipment_type`
- `model`
- `manufacture_year`
- `purchase_date`
- `status`

#### 4. **Worker_Equipment_Skill** (Навички працівника)
- `skill_id` (PK)
- `brigade_id` (FK)
- `equipment_id` (FK)
- `worker_id` (FK)
- `skill_level`
- `certification_date`
- `experience_years`

#### 5. **Land_Plot** (Земельна ділянка)
- `plot_id` (PK)
- `area`
- `has_irrigation`
- `soil_quality_index`
- `brigade_id` (FK)
- `crop_id` (FK)

#### 6. **Crop** (Культура)
- `crop_id` (PK)
- `crop_name`
- `average_yield`
- `requires_irrigation`
- `growing_season_days`

#### 7. **Fertilizer** (Добриво)
- `fertilizer_id` (PK)
- `fertilizer_name`
- `fertilizer_type`
- `application_rate`
- `nitrogen_percent`
- `phosphorus_percent`
- `potassium_percent`

#### 8. **Fertilizer_Application** (Внесення добрив)
- `application_id` (PK)
- `plot_id` (FK)
- `fertilizer_id` (FK)
- `application_date`
- `amount_kg`
- `application_method`
- `applied_by_worker_id` (FK)
- `notes`

### Зв'язки:
- Brigade 1:N Land_Plot
- Brigade 1:N Worker
- Crop 1:N Land_Plot
- Worker M:N Equipment (через Worker_Equipment_Skill)
- Land_Plot M:N Fertilizer (через Fertilizer_Application)

---

## Запити реляційної алгебри (Варіант 15)

### Позначення:
- **S** - Постачальники (Suppliers)
- **P** - Товари/Деталі (Parts)
- **J** - Проекти (Projects)
- **SPJ** - Зв'язок постачань

### Операції:
- `WHERE` - вибірка (селекція)
- `[ ]` - проекція
- `JOIN` - з'єднання
- `UNION` - об'єднання

---

### 1. Отримати повну інформацію про всі проекти в Дніпрі

```
J WHERE CITY='Дніпро'
```

---

### 2. Отримати всі поєднання "ім'я проекту-місто проекту"

```
J [JNAME, CITY]
```

---

### 3️. Отримати всі імена товарів, ім'я яких складає 5 символів

```
(P WHERE LENGTH(PNAME)=5) [PNAME]
```

---

### 4️. Отримати міста постачальників статус яких дорівнює 20

```
(S WHERE STATUS=20) [CITY]
```

---

### 5️. Отримати імена постачальників з Харкова

```
(S WHERE CITY='Харків') [SNAME]
```

---

### 6️. Отримати імена товарів та їх вагу, які постачаються постачальниками S2 та Шевченко

```
T1 := (SPJ WHERE S#='S2') [P#]
T2 := (SPJ JOIN (S WHERE SNAME='Шевченко')) [P#]
T3 := T1 UNION T2
T4 := T3 JOIN P
RESULT := T4 [PNAME, WEIGHT]
```

---

### 7️. Отримати імена товару, що постачаються постачальником зі статусом більше 15 та іменем, яке починається на літеру С

```
T1 := S WHERE STATUS>15 AND SNAME LIKE 'С%'
T2 := T1 JOIN SPJ
T3 := T2 JOIN P
RESULT := T3 [PNAME]
```

---

### 8️. Отримати номери проектів, в які постачаються товари з Харкова або постачальником з Харкова

```
T1 := (P WHERE CITY='Харків') JOIN SPJ
T2 := T1 [J#]
T3 := (S WHERE CITY='Харків') JOIN SPJ
T4 := T3 [J#]
RESULT := T2 UNION T4
```

---

### 9️. Отримати імена товарів, які поставляються Шевченко в кількості більше 200

```
T1 := S WHERE SNAME='Шевченко'
T2 := T1 JOIN SPJ
T3 := T2 WHERE QTY>200
T4 := T3 JOIN P
RESULT := T4 [PNAME]
```

---

## Запити для предметної області (Ферма)

### 1️. Отримати повну інформацію про всі ділянки

```
Land_Plot
```

---

### 2️. Отримати повну інформацію про всі ділянки зі зрошенням

```
Land_Plot WHERE has_irrigation=TRUE
```

---

### 3️. Отримати всі поєднання "площа ділянки-культура"

```
Land_Plot [area, crop_id]
```

---

### 4️. Отримати всі імена культур

```
Crop [crop_name]
```

---

### 5️. Отримати номери бригад, які обслуговують ділянку P1

```
(Land_Plot WHERE plot_id='P1') [brigade_id]
```

---

### 6️. Отримати імена працівників, що працюють з технікою T1

**Скорочена форма:**
```
((Worker_Equipment_Skill JOIN Worker) WHERE equipment_id='T1') [first_name, last_name]
```

**Детальна форма:**
```
T1 := Worker_Equipment_Skill JOIN Worker
T2 := T1 WHERE equipment_id='T1'
T3 := T2 [first_name, last_name]
```

**Пояснення:**
- З'єднання Worker_Equipment_Skill і Worker за `worker_id`
- Вибірка кортежів з `equipment_id='T1'`
- Проекція за атрибутами `first_name`, `last_name`

---

### 7️. Отримати імена працівників, які можуть працювати з тракторами

**Скорочена форма:**
```
(((Equipment WHERE equipment_type='Трактор') JOIN Worker_Equipment_Skill) [worker_id] JOIN Worker) [first_name, last_name]
```

**Детальна форма:**
```
T1 := Equipment WHERE equipment_type='Трактор'
T2 := T1 JOIN Worker_Equipment_Skill
T3 := T2 [worker_id]
T4 := T3 JOIN Worker
T5 := T4 [first_name, last_name]
```

**Пояснення:**
1. Вибірка техніки типу "Трактор"
2. З'єднання з Worker_Equipment_Skill за `equipment_id`
3. Проекція номерів працівників
4. З'єднання з Worker за `worker_id`
5. Проекція імен та прізвищ

---

### 8️. Отримати номери ділянок, на які вносили добрива працівником W1 або для культури C1

**Скорочена форма:**
```
(Fertilizer_Application WHERE applied_by_worker_id='W1') [plot_id] UNION (Land_Plot WHERE crop_id='C1') [plot_id]
```

**Детальна форма:**
```
T1 := Fertilizer_Application WHERE applied_by_worker_id='W1'
T2 := T1 [plot_id]
T3 := Land_Plot WHERE crop_id='C1'
T4 := T3 [plot_id]
T5 := T2 UNION T4
```

---

### 9️. Отримати назви добрив, які вносилися на ділянку D1 у кількості більше 100 кг

```
(Fertilizer_Application WHERE plot_id='D1' AND amount_kg>100) [fertilizer_id] JOIN Fertilizer [fertilizer_name]
```

---

## Основні операції реляційної алгебри

| Операція | Позначення | Опис |
|----------|------------|------|
| **Селекція** | `WHERE` | Вибір рядків за умовою |
| **Проекція** | `[ ]` | Вибір стовпців |
| **З'єднання** | `JOIN` | Комбінування таблиць |
| **Об'єднання** | `UNION` | Всі кортежі з обох відношень |
| **Перетин** | `INTERSECT` | Спільні кортежі |
| **Різниця** | `MINUS` | Кортежі з першого, яких немає у другому |

---

## Висновки

У ході виконання лабораторної роботи успішно опанувала основи реляційної алгебри та її практичне застосування.

**Результати:**
- Виконано всі 9 запитів за варіантом 15
- Створено 9 запитів для власної предметної області
- Побудовано ER-діаграму у 5 нормальній формі
- Опрацьовано різні форми запису запитів (скорочена та детальна)

**Набуті навички:**
- Формалізація бізнес-вимог у структуровані запити
- Робота з операціями селекції, проекції, з'єднання
- Оптимізація складних запитів через декомпозицію
- Аналіз взаємозв'язків між сутностями

Особливу увагу приділила аналізу структури даних та побудові оптимальних запитів. Робота з власною предметною областю (система управління фермою) дозволила глибше зрозуміти взаємозв'язки між сутностями та ефективно використовувати операції з'єднання для отримання необхідної інформації.

---

## Посилання
- **Конспект/Словник:** [Google-документ](https://docs.google.com/document/d/1Ugped4A2_HVfekMeNFSazkbyiOyubYB4vJDXcnRIavY/edit?usp=sharing)

---

